<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dheeraj’s World</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #050508;
  color: #cfe3ff;
  font-family: Arial, sans-serif;
}

/* ---------- BACKGROUND ---------- */
#background {
  position: fixed;
  inset: 0;
  background: url("background.png") center / cover no-repeat;
  z-index: 0;
}

/* ---------- WORLD ---------- */
#world {
  position: fixed;
  inset: 0;
  z-index: 1;
}

/* ---------- CENTER ---------- */
#center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

#center h1 {
  font-size: 4rem;
  margin-bottom: 0.5rem;
}

/* ---------- LABELS ---------- */
.label {
  position: absolute;
  font-family: "Snap ITC", "Comic Sans MS", cursive;
  font-size: 2rem;
  color: rgba(180,230,255,0.8);
  cursor: pointer;
  transition: all 0.5s ease;
}

.label:hover {
  color: white;
  transform: scale(1.25);
  text-shadow: 0 0 18px rgba(200,240,255,0.7);
}

/* Positions */
#poetry  { top: 27%; left: 18%; }
#science { top: 27%; right: 18%; }
#music   { bottom: 30%; left: 19%; }
#blog    { bottom: 30%; right: 20%; }

#about {
  bottom: 12%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 1.4rem;
  opacity: 0.75;
}

/* ---------- READER ---------- */
#reader {
  position: fixed;
  inset: 0;
  z-index: 2;
  display: none;
}

#reader-content {
  position: absolute;
  top: 26%;
  left: 50%;
  transform: translateX(-50%);
  width: 70%;
  max-height: 65%;
  overflow-y: auto;
  padding: 20px 10px 40px;
  font-size: 1.15rem;
}

/* File list */
.file-link {
  margin: 14px 0;
  cursor: pointer;
  color: #9fbfff;
}
.file-link:hover { color: white; }

pre {
  white-space: pre-wrap;
  line-height: 1.75;
  font-size: 1.15rem;
  color: #bcd6ff;
}

/* Back + Download */
#back, #download {
  position: absolute;
  top: 6%;
  font-size: 0.95rem;
  cursor: pointer;
  opacity: 0.65;
}

#back {
  left: 50%;
  transform: translateX(-50%);
}

#download {
  right: 6%;
  border: 1px solid rgba(200,230,255,0.3);
  padding: 6px 10px;
  border-radius: 6px;
}

#back:hover, #download:hover {
  opacity: 1;
  background: rgba(200,230,255,0.1);
}
</style>
</head>

<body>

<div id="background"></div>

<div id="world">
  <div id="center">
    <h1>Welcome to Dheeraj’s World</h1>
    <p>Thoughts fire. Signals travel. Meaning emerges.</p>
  </div>

  <div id="poetry"  class="label">Poetry ✎</div>
  <div id="science" class="label">Science ⧉</div>
  <div id="music"   class="label">Music ♫</div>
  <div id="blog"    class="label">Blogs ☰</div>
  <div id="about"   class="label">About Me</div>
</div>

<div id="reader">
  <div id="back">← back</div>
  <div id="download">⬇ Download</div>
  <div id="reader-content"></div>
</div>

<script>
/* ---------- MAP UI → FOLDER ---------- */
const sectionMap = {
  poetry: "Poetry",
  science: "Science",
  music: "Music",
  blog: "Blogs",
  about: "about"
};

/* ---------- ELEMENTS ---------- */
const labels = document.querySelectorAll(".label");
const reader = document.getElementById("reader");
const content = document.getElementById("reader-content");
const back = document.getElementById("back");
const downloadBtn = document.getElementById("download");
const center = document.getElementById("center");

/* ---------- STORE POSITIONS ---------- */
const originalPos = {};
labels.forEach(l => {
  originalPos[l.id] = {
    top: l.style.top,
    left: l.style.left,
    right: l.style.right,
    bottom: l.style.bottom,
    transform: l.style.transform
  };
  l.addEventListener("click", () => openSection(l));
});

let currentFilePath = null;

/* ---------- OPEN SECTION ---------- */
function openSection(label) {
  center.style.display = "none";

  labels.forEach(l => {
    if (l !== label) l.style.display = "none";
  });

  label.style.top = "16%";
  label.style.left = "50%";
  label.style.right = "auto";
  label.style.bottom = "auto";
  label.style.transform = "translateX(-50%) scale(1.4)";

  reader.style.display = "block";
  downloadBtn.style.display = "none";

  const folder = sectionMap[label.id];
  loadIndex(folder);
}


/* ---------- LOAD INDEX ---------- */
function loadIndex(folder) {
  content.innerHTML = "Loading...";

  fetch(`${folder}/index.json`)
    .then(r => r.json())
    .then(files => {
      content.innerHTML = "";

      Object.entries(files).forEach(([name, file], i) => {
        const d = document.createElement("div");
        d.className = "file-link";
        d.textContent = `${i + 1}. ${name}`;
        d.onclick = () => loadFile(folder, file);
        content.appendChild(d);
      });
    })
    .catch(err => {
      console.error(err);
      content.innerHTML = "No content found.";
    });
}


/* ---------- LOAD FILE ---------- */
function loadFile(folder, file) {
  const ext = file.split(".").pop().toLowerCase();
  const path = `${folder}/${file}`;

  currentFilePath = path;
  downloadBtn.style.display = "block";
  downloadBtn.onclick = () => {
    const a = document.createElement("a");
    a.href = path;
    a.download = "";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  };

  /* TEXT */
  if (["txt", "md"].includes(ext)) {
    fetch(path).then(r => r.text()).then(t => {
      content.innerHTML = `<pre>${t}</pre>`;
    });
    return;
  }

  /* CSV */
  if (ext === "csv") {
    fetch(path).then(r => r.text()).then(t => {
      const rows = t.split("\n").map(r => r.split(","));
      let h = "<table style='width:100%; border-collapse:collapse;'>";
      rows.forEach((row,i)=>{
        h+="<tr>";
        row.forEach(c=>{
          h+=`<${i===0?"th":"td"} style="border:1px solid rgba(255,255,255,0.2); padding:6px;">${c}</${i===0?"th":"td"}>`;
        });
        h+="</tr>";
      });
      h+="</table>";
      content.innerHTML = h;
    });
    return;
  }

  /* MEDIA */
  if (["png","jpg","jpeg","gif","webp"].includes(ext)) {
    content.innerHTML = `<img src="${path}" style="max-width:100%; max-height:80vh;">`;
    return;
  }

  if (["mp3","wav","ogg"].includes(ext)) {
    content.innerHTML = `<audio controls autoplay style="width:100%;"><source src="${path}"></audio>`;
    return;
  }

  if (["mp4","webm"].includes(ext)) {
    content.innerHTML = `<video controls autoplay style="max-width:100%; max-height:80vh;"><source src="${path}"></video>`;
    return;
  }

  if (ext === "pdf") {
    content.innerHTML = `<iframe src="${path}" style="width:100%; height:80vh;"></iframe>`;
    return;
  }

  /* OFFICE → GOOGLE VIEWER */
  if (["doc","docx","xls","xlsx","ppt","pptx"].includes(ext)) {
    const viewer =
      "https://docs.google.com/gview?embedded=true&url=" +
      encodeURIComponent(location.origin + "/" + path);
    content.innerHTML = `<iframe src="${viewer}" style="width:100%; height:80vh;"></iframe>`;
    return;
  }

  window.open(path, "_blank");
}

/* ---------- BACK ---------- */
back.onclick = () => {
  reader.style.display = "none";
  content.innerHTML = "";
  center.style.display = "block";
  downloadBtn.style.display = "none";

  labels.forEach(l => {
    l.style.display = "block";
    Object.assign(l.style, originalPos[l.id]);
  });
};
</script>

</body>
</html>

