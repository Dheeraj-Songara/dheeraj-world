<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dheeraj’s World</title>

  
<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #050508;
  color: #cfe3ff;
  font-family: Arial, sans-serif;
}

/* ---------- BACKGROUND (IMMUTABLE) ---------- */
#background {
  position: fixed;
  inset: 0;
  background: url("background.png") center / cover no-repeat;
  z-index: 0;
}

/* ---------- WORLD LAYER ---------- */
#world {
  position: fixed;
  inset: 0;
  z-index: 1;
}

/* ---------- CENTER INTRO ---------- */
#center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

#center h1 {
  font-size: 4rem;
  margin-bottom: 0.5rem;
}

/* ---------- LABELS ---------- */
.label {
  position: absolute;
  font-family: "Snap ITC", "Comic Sans MS", cursive;
  font-size: 2rem;
  color: rgba(180,230,255,0.8);
  cursor: pointer;
  transition: all 0.6s ease;
}

.label:hover {
  color: white;
  transform: scale(1.25);
  text-shadow: 0 0 18px rgba(200,240,255,0.7);
}

/* Original positions */
#poetry  { top: 27%; left: 18%; }
#science { top: 27%; right: 18%; }
#music   { bottom: 30%; left: 19%; }
#blog    { bottom: 30%; right: 20%; }

/* About Me */
#about {
  bottom: 12%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 1.4rem;
  opacity: 0.75;
}

/* ---------- READER ---------- */
#reader {
  position: fixed;
  inset: 0;
  z-index: 2;
  display: none;
}

#reader-content {
  position: absolute;
  top: 26%;
  left: 50%;
  transform: translateX(-50%);
  width: 70%;
  max-height: 65%;
  overflow-y: auto;
  padding: 20px 10px 40px;
  font-size: 1.15rem;
}

/* File list */
.file-link {
  margin: 14px 0;
  cursor: pointer;
  color: #9fbfff;
}
.file-link:hover { color: white; }

pre {
  white-space: pre-wrap;
  line-height: 1.75;
  font-size: 1.15rem;
  color: #bcd6ff;
}

/* Back */
#back {
  position: absolute;
  top: 6%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 1rem;
  cursor: pointer;
  opacity: 0.6;
}
#back:hover { opacity: 1; }
</style>
</head>

<body>

<div id="background"></div>

<div id="world">
  <div id="center">
    <h1>Welcome to Dheeraj’s World</h1>
    <p>Thoughts fire. Signals travel. Meaning emerges.</p>
  </div>

  <div id="poetry"  class="label">Poetry ✎</div>
  <div id="science" class="label">Science ⧉</div>
  <div id="music"   class="label">Music ♫</div>
  <div id="blog"    class="label">Blogs ☰</div>
  <div id="about"   class="label">About Me</div>
</div>

<div id="reader">
  <div id="back">← back</div>
  <div id="reader-content"></div>
</div>

<script>
const sectionMap = {
  poetry: "Poetry",
  science: "Science",
  music: "Music",
  blog: "Blogs",
  about: "about"
};
  
const labels = document.querySelectorAll(".label");
const reader = document.getElementById("reader");
const content = document.getElementById("reader-content");
const back = document.getElementById("back");
const center = document.getElementById("center");

const originalPos = {};
labels.forEach(l => {
  originalPos[l.id] = {
    top: l.style.top,
    left: l.style.left,
    right: l.style.right,
    bottom: l.style.bottom,
    transform: l.style.transform
  };
  l.addEventListener("click", () => openSection(l));
});

function openSection(label) {
  center.style.display = "none";

  labels.forEach(l => {
    if (l !== label) l.style.display = "none";
  });

  label.style.top = "16%";
  label.style.left = "50%";
  label.style.right = "auto";
  label.style.bottom = "auto";
  label.style.transform = "translateX(-50%) scale(1.4)";

  reader.style.display = "block";
  loadIndex(sectionMap[label.id]);
;
}

function loadIndex(section) {
  content.innerHTML = "Loading...";
  fetch(`${section}/index.json`)
    .then(r => r.json())
    .then(files => {
      content.innerHTML = "";
      files.forEach((f, i) => {
        const d = document.createElement("div");
        d.className = "file-link";
        d.textContent = `${i + 1}. ${f}`;
        d.onclick = () => loadFile(section, f);
        content.appendChild(d);
      });
    })
    .catch(() => content.innerHTML = "No content.");
}

function loadFile(section, file) {
  const ext = file.split('.').pop().toLowerCase();
  const path = `${section}/${file}`;
  const isLocal =
    location.hostname === "localhost" ||
    location.hostname === "127.0.0.1" ||
    location.hostname.endsWith(".local") ||
    location.protocol === "file:";


  /* TEXT */
  if (["txt","md"].includes(ext)) {
    fetch(path).then(r => r.text()).then(t => {
      content.innerHTML = `<pre>${t}</pre>`;
    });
    return;
  }

  /* CSV */
  if (ext === "csv") {
    fetch(path).then(r => r.text()).then(text => {
      const rows = text.split("\n").map(r => r.split(","));
      let html = "<table style='width:100%; border-collapse:collapse;'>";
      rows.forEach((row,i)=>{
        html += "<tr>";
        row.forEach(c=>{
          html += `<${i===0?"th":"td"} style="border:1px solid rgba(255,255,255,0.2); padding:6px;">${c}</${i===0?"th":"td"}>`;
        });
        html += "</tr>";
      });
      html += "</table>";
      content.innerHTML = html;
    });
    return;
  }

  /* IMAGES */
  if (["png","jpg","jpeg","gif","webp"].includes(ext)) {
    content.innerHTML = `<img src="${path}" style="max-width:100%; max-height:80vh;">`;
    return;
  }

  /* AUDIO */
  if (["mp3","wav","ogg"].includes(ext)) {
    content.innerHTML = `
      <audio controls autoplay style="width:100%;">
        <source src="${path}">
      </audio>`;
    return;
  }

  /* VIDEO */
  if (["mp4","webm"].includes(ext)) {
    content.innerHTML = `
      <video controls autoplay style="max-width:100%; max-height:80vh;">
        <source src="${path}">
      </video>`;
    return;
  }

  /* PDF */
  if (ext === "pdf") {
    content.innerHTML = `<iframe src="${path}" style="width:100%; height:80vh;"></iframe>`;
    return;
  }

  /* OFFICE FILES */
  if (["doc","docx","xls","xlsx","ppt","pptx"].includes(ext)) {
    if (isLocal) {
      window.open(path, "_blank");
    } else {
      const viewer =
        "https://docs.google.com/gview?embedded=true&url=" +
        encodeURIComponent(location.origin + "/" + path);
      content.innerHTML = `<iframe src="${viewer}" style="width:100%; height:80vh;"></iframe>`;
    }
    return;
  }

  /* FALLBACK */
  window.open(path, "_blank");
}

back.onclick = () => {
  reader.style.display = "none";
  content.innerHTML = "";
  center.style.display = "block";

  labels.forEach(l => {
    l.style.display = "block";
    Object.assign(l.style, originalPos[l.id]);
  });
};
</script>

</body>
</html>


